<body>
<div class="container-fluid text-center bg-primary">
    <br>
    <h1>更新站点</h1>
    <h3 class="small">快速更新当前站点</h3>
    <br>
</div>
<div class="container">
    <br><br><br>
    <div id="list" class="uploader-list"></div>
    <div class="btns">
        <div id="picker">选择文件</div>
        <button id="ctlBtn" class="btn btn-default">开始上传</button>
    </div>
</div>
<script>
    var option = {
        file_data_name: "file",
        // chunk_size:0,
        filters:{
            mime_types:[
                {
                    title : 'XC包文件',
                    extensions : 'xcpak'
                }
            ]
        },
        responseHandler: function (object){
            if (object.response==="successful"){
                console.log("上传成功");
                applyUpdate();
            }else if (object.response==="unsuccessful"){
                console.log("上传失败");
            }else {
                console.log("未知错误："+object.response);
            }
        }
    };
    $("#uploader").uploader(option);
    function applyUpdate(){
        $.post("./?/applyUpdate",function (data) {
            // console.log(data);
            alert(data);
            location.reload();
        })
    }
</script>
</body>